148,169d147
< 	//mobileDomains:
< 	/**
< 	 * @hide
< 	 */
< 	class JavaScriptInterface {
< 		WebViewProvider wvp;
< 		Context mContext;
< 		JavaScriptInterface(WebViewProvider wvp,Context c) {
< 			this.wvp = wvp;
< 			this.mContext = c;
< 		}
< 
< 		public void setAllowedOrigins(String allowedOrigins) {
< 			//todo: set allowedOrigins with the web domain
< 			String webOrigin = Log.getSchmeAndHostFromURL(wvp.getUrl());
< 			PackageManager pm = mContext.getPackageManager();
< 			String entryPoint = mContext.getPackageName(); //entry point is the app
< 			pm.setOriginPolicy(PackageManager.SPECIFY_SENDER_ORIGINS_WEB,webOrigin,allowedOrigins,entryPoint);
< 			pm.setOriginPolicy(PackageManager.SPECIFY_RECIPIENT_ORIGINS_WEB,webOrigin,allowedOrigins,entryPoint);
< 		}
< 	}
< 
1707c1685
<         if (isAccessibilityInjectionEnabled()) {	
---
>         if (isAccessibilityInjectionEnabled()) {
1709,1714d1686
< 
< 			//mobileDomains: JavaScript API support
< 			if (enabled) { //JavaScript is enabled
< 				final JavaScriptInterface js = new JavaScriptInterface(this,mContext);
< 				addJavascriptInterface(js,"mobile"); //JavaScript script will call mobile.setAllowedOrigins().
< 			}
2582,2589d2553
<     /**
<      * mobileDomains: implementation of setAllowedOrigins for webview
<      */
<     @Override
<     public void setAllowedOrigins(String allowedOrigins) {
< 		mWebViewCore.setAllowedOrigins(allowedOrigins);
< 	}
< 
